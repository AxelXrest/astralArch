!function t(e,s,o){function i(n,l){if(!s[n]){if(!e[n]){var a="function"==typeof require&&require;if(!l&&a)return a(n,!0);if(r)return r(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var u=s[n]={exports:{}};e[n][0].call(u.exports,(function(t){return i(e[n][1][t]||t)}),u,u.exports,t,e,s,o)}return s[n].exports}for(var r="function"==typeof require&&require,n=0;n<o.length;n++)i(o[n]);return i}({1:[function(t,e,s){"use strict";new(t("MouseEventController"))({siteName:"Plex.tv",play:"div[class^=ControlsContainer] button[data-testid=resumeButton]",pause:"div[class^=ControlsContainer] button[data-testid=pauseButton]",playNext:"div[class^=ControlsContainer] button[data-testid=nextButton]",playPrev:"div[class^=ControlsContainer] button[data-testid=previousButton]",mute:"div[class^=ControlsContainer] button[data-testid=volumeButton]",song:"title",buttonSwitch:!0}).click=function(t){this.mousedown({selectorButton:t.selectorButton}),this.mouseup({selectorButton:t.selectorButton})}},{MouseEventController:3}],2:[function(t,e,s){"use strict";!function(){var s=t("../modules/SKLog.js");function o(t){this.siteName=t.siteName||null,this.selectors={playPause:t.playPause||null,play:t.play||null,pause:t.pause||null,playNext:t.playNext||null,playPrev:t.playPrev||null,mute:t.mute||null,like:t.like||null,confirmLike:t.confirmLike||null,dislike:t.dislike||null,confirmDislike:t.confirmDislike||null,iframe:t.iframe||null,playState:t.playState||null,song:t.song||null,artist:t.artist||null,album:t.album||null,art:t.art||null,currentTime:t.currentTime||null,totalTime:t.totalTime||null},Object.defineProperties(this.selectors,Object.keys(this.selectors).reduce(function(t,e){var s=this.selectors[e];return"function"==typeof s&&(t[e]={get:s.bind(this)}),t}.bind(this),{})),this.oldState={},this.buttonSwitch=t.buttonSwitch||!1,this.attachListeners(),this.hidePlayer=t.hidePlayer||!1,this.overridePlayPrev=t.overridePlayPrev||!1,this.overridePlayPause=t.overridePlayPause||!1,this.overridePlayNext=t.overridePlayNext||!1,chrome.runtime.sendMessage({created:!0},(function(){s("SK content script loaded")}))}o.prototype.doc=function(){var t=document;return this.selectors.iframe&&document.querySelector(this.selectors.iframe)&&document.querySelector(this.selectors.iframe).tagName.indexOf("FRAME")>-1&&(t=document.querySelector(this.selectors.iframe).contentWindow.document),t},o.prototype.injectScript=function(t){var e=document.createElement("script");e.setAttribute("type","text/javascript"),t.url&&e.setAttribute("src",chrome.extension.getURL(t.url)),t.script&&(e.innerHTML=t.script),(document.head||document.documentElement).appendChild(e)},o.prototype.click=function(t){if(null!==(t=t||{}).selectorButton){try{this.doc().querySelector(t.selectorButton).click(),s(t.action)}catch(e){s("Element not found for click.",t.selectorButton,!0)}this.updatePlayerState()}else s("disabled",t.action)},o.prototype.playPause=function(){null!==this.selectors.play&&null!==this.selectors.pause?this.isPlaying()?this.click({action:"playPause",selectorButton:this.selectors.pause,selectorFrame:this.selectors.iframe}):this.click({action:"playPause",selectorButton:this.selectors.play,selectorFrame:this.selectors.iframe}):this.click({action:"playPause",selectorButton:this.selectors.playPause,selectorFrame:this.selectors.iframe})},o.prototype.playNext=function(){this.click({action:"playNext",selectorButton:this.selectors.playNext,selectorFrame:this.selectors.iframe})},o.prototype.playPrev=function(){this.click({action:"playPrev",selectorButton:this.selectors.playPrev,selectorFrame:this.selectors.iframe})},o.prototype.stop=function(){this.isPlaying()&&this.playPause()},o.prototype.mute=function(){this.click({action:"mute",selectorButton:this.selectors.mute,selectorFrame:this.selectors.iframe})},o.prototype.like=function(){if(this.click({action:"like",selectorButton:this.selectors.like,selectorFrame:this.selectors.iframe}),null!==this.selectors.confirmLike){var t=this;new MutationObserver((function(){this.disconnect(),t.click({action:"confirmLike",selectorButton:t.selectors.confirmLike,selectorFrame:t.selectors.iframe})})).observe(document.documentElement,{childList:!0,subtree:!0})}},o.prototype.dislike=function(){if(this.click({action:"dislike",selectorButton:this.selectors.dislike,selectorFrame:this.selectors.iframe}),null!==this.selectors.confirmDislike){var t=this;new MutationObserver((function(){this.disconnect(),t.click({action:"confirmDislike",selectorButton:t.selectors.confirmDislike,selectorFrame:t.selectors.iframe})})).observe(document.documentElement,{childList:!0,subtree:!0})}},o.prototype.isPlaying=function(){var t=this.doc().querySelector(this.selectors.play),e=!1;if(this.buttonSwitch)e=null===t;else if(this.selectors.playState){var s=this.doc().querySelector(this.selectors.playState);e=!(!s||"none"===window.getComputedStyle(s,null).getPropertyValue("display"))}else t&&(e="none"===window.getComputedStyle(t,null).getPropertyValue("display"));return e},o.prototype.updatePlayerState=function(){this.checkPlayer&&this.checkPlayer();var t=this.getStateData();JSON.stringify(t)!==JSON.stringify(this.oldState)&&(s("Player state change"),this.getSongChanged(t)&&chrome.runtime.sendMessage({action:"send_change_notification",stateData:t}),this.oldState=t,chrome.runtime.sendMessage({action:"update_player_state",stateData:t}))},o.prototype.getStateData=function(){return{song:null===this.getSongData(this.selectors.song)?null:this.getSongData(this.selectors.song).replace(/\s+/g," "),artist:null===this.getSongData(this.selectors.artist)?null:this.getSongData(this.selectors.artist).replace(/\s+/g," "),album:null===this.getSongData(this.selectors.album)?null:this.getSongData(this.selectors.album).replace(/\s+/g," "),art:this.getArtData(this.selectors.art),currentTime:this.getSongData(this.selectors.currentTime),totalTime:this.getSongData(this.selectors.totalTime),isPlaying:this.isPlaying(),siteName:null==this.siteName?null:this.siteName.replace(/\s+/g," "),canDislike:!(!this.selectors.dislike||!this.doc().querySelector(this.selectors.dislike)),canPlayPrev:this.overridePlayPrev||!(!this.selectors.playPrev||!this.doc().querySelector(this.selectors.playPrev)),canPlayPause:this.overridePlayPause||!!(this.selectors.playPause&&this.doc().querySelector(this.selectors.playPause)||this.selectors.play&&this.doc().querySelector(this.selectors.play)||this.selectors.pause&&this.doc().querySelector(this.selectors.pause)),canPlayNext:this.overridePlayNext||!(!this.selectors.playNext||!this.doc().querySelector(this.selectors.playNext)),canLike:!(!this.selectors.like||!this.doc().querySelector(this.selectors.like)),hidePlayer:this.hidePlayer}},o.prototype.getSongChanged=function(t){return this.oldState&&t&&this.oldState.song!==t.song},o.prototype.getSongData=function(t){if(!t)return null;var e=this.doc().querySelector(t);return e&&e.textContent?e.textContent:null},o.prototype.getArtData=function(t){if(!t)return null;var e=this.doc().querySelector(t);return e&&e.attributes&&e.attributes.src?e.attributes.src.value:null},o.prototype.doRequest=function(t,e,s){if(void 0!==t&&("playPause"===t.action&&this.playPause(),"playNext"===t.action&&this.playNext(),"playPrev"===t.action&&this.playPrev(),"stop"===t.action&&this.stop(),"mute"===t.action&&this.mute(),"like"===t.action&&this.like(),"dislike"===t.action&&this.dislike(),"playerStateNotify"===t.action&&chrome.runtime.sendMessage({action:"send_change_notification",stateData:this.getStateData()}),"getPlayerState"===t.action)){var o=this.getStateData();this.oldState=o,s(o)}},o.prototype.attachListeners=function(){chrome.runtime.onMessage.addListener(this.doRequest.bind(this)),setInterval(this.updatePlayerState.bind(this),200),s("Attached listener for ",this)},e.exports=o}()},{"../modules/SKLog.js":5}],3:[function(t,e,s){"use strict";!function(){var s=t("BaseController"),o=t("../modules/MouseEventDispatcher.js"),i=t("../modules/SKLog.js");function r(){s.apply(this,arguments)}r.prototype=Object.create(s.prototype),r.prototype.constructor=r,o.eachTypes((function(t){Object.prototype.hasOwnProperty.call(s.prototype,t)||(r.prototype[t]=function(e,s){if(null!==(e=e||{}).selectorButton){try{var r=this.doc().querySelector(e.selectorButton);o.dispatch(r,t,s),e.action&&i(e.action)}catch(s){i("Element not found for "+t+".",e.selectorButton,!0)}this.updatePlayerState()}else i("disabled",e.action)})})),e.exports=r}()},{"../modules/MouseEventDispatcher.js":4,"../modules/SKLog.js":5,BaseController:2}],4:[function(t,e,s){"use strict";!function(){function t(){throw"MouseEventDispatcher cannot be instantiated."}t.eventTypes=["mouseclick","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup"],t.dispatch=function(t,e,s){"string"==typeof t&&(t=document.querySelector(t)),"mouseclick"===e&&(e="click"),s=s||{};var o=document.createEvent("MouseEvents");o.initMouseEvent(e,s.canBubble||!0,s.cancelable||!0,s.view||window,s.detail||1,s.screenX||0,s.screenY||0,s.clientX||0,s.clientY||0,s.ctrlKey||!1,s.altKey||!1,s.shiftKey||!1,s.metaKey||!1,s.button||0,s.relatedTarget||null),t.dispatchEvent(o)},t.eachTypes=function(t){for(var e=0;e<this.eventTypes.length;e++)t(this.eventTypes[e])},t.eachTypes((function(e){t[e]=function(s,o){t.dispatch(s,e,o)}})),e.exports=t}()},{}],5:[function(t,e,s){"use strict";e.exports=function(t,e,s){t&&(e=e||"",s?(console.error("STREAMKEYS-ERROR: "+t,e),t="ERROR: "+t):console.log("STREAMKEYS-INFO: "+t,e))}},{}]},{},[1]);