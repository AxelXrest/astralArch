!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=14)}([function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(6)();e.exports=o;try{regeneratorRuntime=o}catch(e){"object"===("undefined"==typeof globalThis?"undefined":n(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},,function(e,t,r){var n,o,a;function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},l.apply(this,arguments)}function f(e){var t=p();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){var t="function"==typeof Map?new Map:void 0;return m=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return g(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)},m(e)}function g(e,t,r){return g=p()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&d(o,r.prototype),o},g.apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],n=function(e){"use strict";var t;if(null===(t=globalThis.chrome)||void 0===t||null===(t=t.runtime)||void 0===t||!t.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){var r="The message port closed before a response was received.",n=function(e){var t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(t).length)throw new Error("api-metadata.json has not been included in browser-polyfill");var n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,r,n,o=f(a);function a(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,r)).createItem=e,t}return t=a,(r=[{key:"get",value:function(e){return this.has(e)||this.set(e,this.createItem(e)),l(y(a.prototype),"get",this).call(this,e)}}])&&u(t.prototype,r),n&&u(t,n),a}(m(WeakMap)),o=function(e){return e&&"object"===c(e)&&"function"==typeof e.then},a=function(t,r){return function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||o.length<=1&&!1!==r.singleCallbackArg?t.resolve(o[0]):t.resolve(o)}},s=function(e){return 1==e?"argument":"arguments"},g=function(e,t){return function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];if(o.length<t.minArgs)throw new Error("Expected at least ".concat(t.minArgs," ").concat(s(t.minArgs)," for ").concat(e,"(), got ").concat(o.length));if(o.length>t.maxArgs)throw new Error("Expected at most ".concat(t.maxArgs," ").concat(s(t.maxArgs)," for ").concat(e,"(), got ").concat(o.length));return new Promise((function(n,i){if(t.fallbackToNoCallback)try{r[e].apply(r,o.concat([a({resolve:n,reject:i},t)]))}catch(a){console.warn("".concat(e," API method doesn't seem to support the callback parameter, ")+"falling back to call it without a callback: ",a),r[e].apply(r,o),t.fallbackToNoCallback=!1,t.noCallback=!0,n()}else t.noCallback?(r[e].apply(r,o),n()):r[e].apply(r,o.concat([a({resolve:n,reject:i},t)]))}))}},p=function(e,t,r){return new Proxy(t,{apply:function(t,n,o){return r.call.apply(r,[n,e].concat(i(o)))}})},h=Function.call.bind(Object.prototype.hasOwnProperty),v=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object.create(null),a={has:function(e,r){return r in t||r in o},get:function(a,i,s){if(i in o)return o[i];if(i in t){var u=t[i];if("function"==typeof u)if("function"==typeof r[i])u=p(t,t[i],r[i]);else if(h(n,i)){var l=g(i,n[i]);u=p(t,t[i],l)}else u=u.bind(t);else if("object"===c(u)&&null!==u&&(h(r,i)||h(n,i)))u=e(u,r[i],n[i]);else{if(!h(n,"*"))return Object.defineProperty(o,i,{configurable:!0,enumerable:!0,get:function(){return t[i]},set:function(e){t[i]=e}}),u;u=e(u,r[i],n["*"])}return o[i]=u,u}},set:function(e,r,n,a){return r in o?o[r]=n:t[r]=n,!0},defineProperty:function(e,t,r){return Reflect.defineProperty(o,t,r)},deleteProperty:function(e,t){return Reflect.deleteProperty(o,t)}},i=Object.create(t);return new Proxy(i,a)},b=function(e){return{addListener:function(t,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];t.addListener.apply(t,[e.get(r)].concat(o))},hasListener:function(t,r){return t.hasListener(e.get(r))},removeListener:function(t,r){t.removeListener(e.get(r))}}},x=new n((function(e){return"function"!=typeof e?e:function(t){var r=v(t,{},{getContent:{minArgs:0,maxArgs:0}});e(r)}})),A=new n((function(e){return"function"!=typeof e?e:function(t,r,n){var a,i,s=!1,c=new Promise((function(e){a=function(t){s=!0,e(t)}}));try{i=e(t,r,a)}catch(e){i=Promise.reject(e)}var u=!0!==i&&o(i);if(!0!==i&&!u&&!s)return!1;var l=function(e){e.then((function(e){n(e)}),(function(e){var t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((function(e){console.error("Failed to send onMessage rejected reply",e)}))};return l(u?i:c),!0}})),w=function(t,n){var o=t.reject,a=t.resolve;e.runtime.lastError?e.runtime.lastError.message===r?a():o(new Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?o(new Error(n.message)):a(n)},k=function(e,t,r){for(var n=arguments.length,o=new Array(n>3?n-3:0),a=3;a<n;a++)o[a-3]=arguments[a];if(o.length<t.minArgs)throw new Error("Expected at least ".concat(t.minArgs," ").concat(s(t.minArgs)," for ").concat(e,"(), got ").concat(o.length));if(o.length>t.maxArgs)throw new Error("Expected at most ".concat(t.maxArgs," ").concat(s(t.maxArgs)," for ").concat(e,"(), got ").concat(o.length));return new Promise((function(e,t){var n=w.bind(null,{resolve:e,reject:t});o.push(n),r.sendMessage.apply(r,o)}))},j={devtools:{network:{onRequestFinished:b(x)}},runtime:{onMessage:b(A),onMessageExternal:b(A),sendMessage:k.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:k.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},O={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":O},services:{"*":O},websites:{"*":O}},v(e,j,t)};e.exports=n(chrome)}else e.exports=globalThis.browser},void 0===(a="function"==typeof n?n.apply(t,o):n)||(e.exports=a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return f})),r.d(t,"d",(function(){return m})),r.d(t,"e",(function(){return g})),r.d(t,"c",(function(){return p}));var n=r(0),o=r.n(n),a=r(2),i=r.n(a);function s(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,c,"next",e)}function c(e){s(a,n,o,i,c,"throw",e)}i(void 0)}))}}function u(){return l.apply(this,arguments)}function l(){return(l=c(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.tabs.query({currentWindow:!0,active:!0});case 2:return t=e.sent,r=t[0],e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){var e=0,t=0,r=Array();r=document.getElementsByTagName("*");for(var n=0;n<r.length;n++)r[n].currentStyle?t=parseFloat(r[n].currentStyle.zIndex):window.getComputedStyle&&(t=parseFloat(document.defaultView.getComputedStyle(r[n],null).getPropertyValue("z-index"))),!isNaN(t)&&t>e&&(e=t);return e>1e4?e:1e4}function m(e){var t=new Date;return t.setTime(parseFloat(e)),function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()}(t)}function g(){return window.location.href.replace(window.location.hash,"")}function p(e){var t,r;document.createRange&&((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(r=window.getSelection()).removeAllRanges(),r.addRange(t))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return m})),r.d(t,"d",(function(){return p})),r.d(t,"c",(function(){return y}));var n=r(0),o=r.n(n),a=r(2),i=r.n(a);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))}}function l(){return f.apply(this,arguments)}function f(){return(f=u(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.storage.sync.get(null));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return(g=u(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.storage.sync.get(t);case 2:return r=e.sent,e.abrupt("return",r[t]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){return d.apply(this,arguments)}function d(){return(d=u(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.storage.sync.set(s({},t,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return h.apply(this,arguments)}function h(){return(h=u(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.storage.sync.remove(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,r){"use strict";var n=r(0),o=r.n(n);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.debug=t}var t,r,n,a,s,c,f,m;return t=e,r=[{key:"getOrCreateClientId",value:(m=u(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.get("clientId");case 2:if(t=e.sent,r=t.clientId){e.next=8;break}return r=self.crypto.randomUUID(),e.next=8,chrome.storage.local.set({clientId:r});case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)})},{key:"getOrCreateSessionId",value:(f=u(o.a.mark((function e(){var t,r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.session.get("sessionData");case 2:if(t=e.sent,r=t.sessionData,n=Date.now(),!r||!r.timestamp){e.next=14;break}if(!((n-r.timestamp)/6e4>30)){e.next=11;break}r=null,e.next=14;break;case 11:return r.timestamp=n,e.next=14,chrome.storage.session.set({sessionData:r});case 14:if(r){e.next=18;break}return r={session_id:n.toString(),timestamp:n.toString()},e.next=18,chrome.storage.session.set({sessionData:r});case 18:return e.abrupt("return",r.session_id);case 19:case"end":return e.stop()}}),e)}))),function(){return f.apply(this,arguments)})},{key:"fireEvent",value:(c=u(o.a.mark((function e(t){var r,n,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=a.length>1&&void 0!==a[1]?a[1]:{}).session_id){e.next=5;break}return e.next=4,this.getOrCreateSessionId();case 4:r.session_id=e.sent;case 5:return r.engagement_time_msec||(r.engagement_time_msec=100),e.prev=6,e.t0=fetch,e.t1="".concat(this.debug?"https://www.google-analytics.com/debug/mp/collect":"https://www.google-analytics.com/mp/collect","?measurement_id=").concat("G-65YH810CXR","&api_secret=").concat("W6VzNOjvR3WvnI4mSffUiw"),e.t2=JSON,e.next=12,this.getOrCreateClientId();case 12:return e.t3=e.sent,e.t4=[{name:t,params:r}],e.t5={client_id:e.t3,events:e.t4},e.t6=e.t2.stringify.call(e.t2,e.t5),e.t7={method:"POST",body:e.t6},e.next=19,(0,e.t0)(e.t1,e.t7);case 19:if(n=e.sent,this.debug){e.next=22;break}return e.abrupt("return");case 22:return e.t8=console,e.next=25,n.text();case 25:e.t9=e.sent,e.t8.log.call(e.t8,e.t9),e.next=32;break;case 29:e.prev=29,e.t10=e.catch(6),console.error("Google Analytics request failed with an exception",e.t10);case 32:case"end":return e.stop()}}),e,this,[[6,29]])}))),function(e){return c.apply(this,arguments)})},{key:"firePageViewEvent",value:(s=u(o.a.mark((function e(t,r){var n,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",this.fireEvent("page_view",i({page_title:t,page_location:r},n)));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"fireErrorEvent",value:(a=u(o.a.mark((function e(t){var r,n=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.abrupt("return",this.fireEvent("extension_error",i(i({},t),r)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}],r&&l(t.prototype,r),n&&l(t,n),e}();t.a=new f},function(e,t,r){var n=r(7).default;function o(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=o=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},a=Object.prototype,i=a.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function m(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{m({},"")}catch(t){m=function(e,t,r){return e[t]=r}}function g(e,t,r,n){var o=t&&t.prototype instanceof x?t:x,a=Object.create(o.prototype),i=new I(n||[]);return s(a,"_invoke",{value:T(e,r,i)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=g;var d="suspendedStart",y="suspendedYield",h="executing",v="completed",b={};function x(){}function A(){}function w(){}var k={};m(k,u,(function(){return this}));var j=Object.getPrototypeOf,O=j&&j(j(L([])));O&&O!==a&&i.call(O,u)&&(k=O);var S=w.prototype=x.prototype=Object.create(k);function P(e){["next","throw","return"].forEach((function(t){m(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,a,s,c){var u=p(e[o],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,c)}))}c(u.arg)}var o;s(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function T(e,r,n){var o=d;return function(a,i){if(o===h)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var c=_(s,n);if(c){if(c===b)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=p(e,r,n);if("normal"===u.type){if(o=n.done?v:y,u.arg===b)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function _(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return A.prototype=w,s(S,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:A,configurable:!0}),A.displayName=m(w,f,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,m(e,f,"GeneratorFunction")),e.prototype=Object.create(S),e},r.awrap=function(e){return{__await:e}},P(E.prototype),m(E.prototype,l,(function(){return this})),r.AsyncIterator=E,r.async=function(e,t,n,o,a){void 0===a&&(a=Promise);var i=new E(g(e,t,n,o),a);return r.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(S),m(S,f,"Generator"),m(S,u,(function(){return this})),m(S,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=L,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},r}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";t.a={base:"https://beta.myatoms.io"}},,function(e,t,r){var n=r(15),o=r(11),a=r(16),i=0,s=4,c=36,u=Math.pow(c,s);function l(){return o((a()*u<<0).toString(c),s)}function f(){return i=i<u?i:0,++i-1}function m(){return"c"+(new Date).getTime().toString(c)+o(f().toString(c),s)+n()+(l()+l())}m.slug=function(){var e=(new Date).getTime().toString(36),t=f().toString(36).slice(-4),r=n().slice(0,1)+n().slice(-1),o=l().slice(-2);return e.slice(-2)+t+r+o},m.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},m.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},m.fingerprint=n,e.exports=m},function(e,t){e.exports=function(e,t){var r="000000000"+e;return r.substr(r.length-t)}},function(e,t,r){var n;function o(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}!function(i){"use strict";var s=i.IDBKeyRange||i.webkitIDBKeyRange,u="readonly",l="readwrite",f=Object.prototype.hasOwnProperty,m=function(e){return e},g=i.indexedDB||i.webkitIndexedDB||i.mozIndexedDB||i.oIndexedDB||i.msIndexedDB||i.shimIndexedDB||function(){throw new Error("IndexedDB required")}(),p={},d=["abort","error","versionchange"];function y(e){return e&&"object"===c(e)}function h(e){var t=Object.keys(e).sort();if(1===t.length){var r,n,o=t[0],a=e[o];switch(o){case"eq":r="only";break;case"gt":r="lowerBound",n=!0;break;case"lt":r="upperBound",n=!0;break;case"gte":r="lowerBound";break;case"lte":r="upperBound";break;default:throw new TypeError("`"+o+"` is not a valid key")}return[r,[a,n]]}var i=e[t[0]],s=e[t[1]],c=t.join("-");switch(c){case"gt-lt":case"gt-lte":case"gte-lt":case"gte-lte":return["bound",[i,s,"gt"===t[0],"lt"===t[1]]];default:throw new TypeError("`"+c+"` are conflicted keys")}}function v(e){if(e&&"object"===c(e)&&!(e instanceof s)){var t=a(h(e),2),r=t[0],n=t[1];return s[r].apply(s,o(n))}return e}var b=function(e,t,r,n){var a=this,i=null,f=function(n,a,c,f,m,g,p){return new Promise((function(d,y){var h;try{h=n?s[n].apply(s,o(a)):null}catch(e){return void y(e)}g=g||[],m=m||null;var v=[],b=0,x=[h],A=t.transaction(e,i?l:u);A.onerror=function(e){return y(e)},A.onabort=function(e){return y(e)},A.oncomplete=function(){return d(v)};var w=A.objectStore(e),k="string"==typeof r?w.index(r):w;"count"!==c&&x.push(f||"next");var j=i?Object.keys(i):[];k[c].apply(k,x).onsuccess=function(e){var t,r=e.target.result;if("number"==typeof r)v=r;else if(r)if(null!==m&&m[0]>b)b=m[0],r.advance(m[0]);else if(null!==m&&b>=m[0]+m[1]);else{var n=!0,o="value"in r?r.value:r.key;try{g.forEach((function(e){n="function"==typeof e[0]?n&&e[0](o):n&&o[e[0]]===e[1]}))}catch(e){return void y(e)}if(n){if(b++,i)try{t=o,j.forEach((function(e){var r=i[e];"function"==typeof r&&(r=r(t)),t[e]=r})),o=t,r.update(o)}catch(e){return void y(e)}try{v.push(p(o))}catch(e){return void y(e)}}r.continue()}}}))},g=function(e,t,r){var o=[],a="next",s="openCursor",u=null,l=m,g=!1,p=n||r,d=function(){return p?Promise.reject(p):f(e,t,s,g?a+"unique":a,u,o,l)},y=function(){return a=null,s="count",{execute:d}},h=function(){return s="openKeyCursor",{desc:x,distinct:A,execute:d,filter:b,limit:v,map:k}},v=function(e,t){return p=(u=t?[e,t]:[0,e]).some((function(e){return"number"!=typeof e}))?new Error("limit() arguments must be numeric"):p,{desc:x,distinct:A,filter:b,keys:h,execute:d,map:k,modify:w}},b=function e(t,r){return o.push([t,r]),{desc:x,distinct:A,execute:d,filter:e,keys:h,limit:v,map:k,modify:w}},x=function(){return a="prev",{distinct:A,execute:d,filter:b,keys:h,limit:v,map:k,modify:w}},A=function(){return g=!0,{count:y,desc:x,execute:d,filter:b,keys:h,limit:v,map:k,modify:w}},w=function(e){return i=e&&"object"===c(e)?e:null,{execute:d}},k=function(e){return l=e,{count:y,desc:x,distinct:A,execute:d,filter:b,keys:h,limit:v,modify:w}};return{count:y,desc:x,distinct:A,execute:d,filter:b,keys:h,limit:v,map:k,modify:w}};["only","bound","upperBound","lowerBound"].forEach((function(e){a[e]=function(){return g(e,arguments)}})),this.range=function(e){var t,r=[null,null];try{r=h(e)}catch(e){t=e}return g.apply(void 0,o(r).concat([t]))},this.filter=function(){var e=g(null,null);return e.filter.apply(e,arguments)},this.all=function(){return this.filter()}},x=function(e,t,r,n){var o,a=this,i=!1;if(this.getIndexedDB=function(){return e},this.isClosed=function(){return i},this.query=function(t,r){var n=i?new Error("Database has been closed"):null;return new b(t,e,r,n)},this.add=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return new Promise((function(r,o){if(i)o(new Error("Database has been closed"));else{var a=n.reduce((function(e,t){return e.concat(t)}),[]),s=e.transaction(t,l);s.onerror=function(e){e.preventDefault(),o(e)},s.onabort=function(e){return o(e)},s.oncomplete=function(){return r(a)};var c=s.objectStore(t);a.some((function(e){var t,r;if(y(e)&&f.call(e,"item")&&(r=e.key,e=e.item,null!=r))try{r=v(r)}catch(e){return o(e),!0}try{t=null!=r?c.add(e,r):c.add(e)}catch(e){return o(e),!0}t.onsuccess=function(t){if(y(e)){var r=t.target,n=r.source.keyPath;null===n&&(n="__id__"),f.call(e,n)||Object.defineProperty(e,n,{value:r.result,enumerable:!0})}}}))}}))},this.update=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return new Promise((function(r,o){if(i)o(new Error("Database has been closed"));else{var a=n.reduce((function(e,t){return e.concat(t)}),[]),s=e.transaction(t,l);s.onerror=function(e){e.preventDefault(),o(e)},s.onabort=function(e){return o(e)},s.oncomplete=function(){return r(a)};var c=s.objectStore(t);a.some((function(e){var t,r;if(y(e)&&f.call(e,"item")&&(r=e.key,e=e.item,null!=r))try{r=v(r)}catch(e){return o(e),!0}try{t=null!=r?c.put(e,r):c.put(e)}catch(e){return o(e),!0}t.onsuccess=function(t){if(y(e)){var r=t.target,n=r.source.keyPath;null===n&&(n="__id__"),f.call(e,n)||Object.defineProperty(e,n,{value:r.result,enumerable:!0})}}}))}}))},this.put=function(){return this.update.apply(this,arguments)},this.remove=function(t,r){return new Promise((function(n,o){if(i)o(new Error("Database has been closed"));else{try{r=v(r)}catch(e){return void o(e)}var a=e.transaction(t,l);a.onerror=function(e){e.preventDefault(),o(e)},a.onabort=function(e){return o(e)},a.oncomplete=function(){return n(r)};var s=a.objectStore(t);try{s.delete(r)}catch(e){o(e)}}}))},this.delete=function(){return this.remove.apply(this,arguments)},this.clear=function(t){return new Promise((function(r,n){if(i)n(new Error("Database has been closed"));else{var o=e.transaction(t,l);o.onerror=function(e){return n(e)},o.onabort=function(e){return n(e)},o.oncomplete=function(){return r()},o.objectStore(t).clear()}}))},this.close=function(){return new Promise((function(n,o){i?o(new Error("Database has been closed")):(e.close(),i=!0,delete p[t][r],n())}))},this.get=function(t,r){return new Promise((function(n,o){if(i)o(new Error("Database has been closed"));else{try{r=v(r)}catch(e){return void o(e)}var a=e.transaction(t);a.onerror=function(e){e.preventDefault(),o(e)},a.onabort=function(e){return o(e)};var s,c=a.objectStore(t);try{s=c.get(r)}catch(e){o(e)}s.onsuccess=function(e){return n(e.target.result)}}}))},this.count=function(t,r){return new Promise((function(n,o){if(i)o(new Error("Database has been closed"));else{try{r=v(r)}catch(e){return void o(e)}var a=e.transaction(t);a.onerror=function(e){e.preventDefault(),o(e)},a.onabort=function(e){return o(e)};var s,c=a.objectStore(t);try{s=null==r?c.count():c.count(r)}catch(e){o(e)}s.onsuccess=function(e){return n(e.target.result)}}}))},this.addEventListener=function(t,r){if(!d.includes(t))throw new Error("Unrecognized event type "+t);"error"!==t?e.addEventListener(t,r):e.addEventListener(t,(function(e){e.preventDefault(),r(e)}))},this.removeEventListener=function(t,r){if(!d.includes(t))throw new Error("Unrecognized event type "+t);e.removeEventListener(t,r)},d.forEach((function(e){this[e]=function(t){return this.addEventListener(e,t),this}}),this),!n)return[].some.call(e.objectStoreNames,(function(e){if(a[e])return o=new Error('The store name, "'+e+'", which you have attempted to load, conflicts with db.js method names."'),a.close(),!0;a[e]={},Object.keys(a).filter((function(e){return![].concat(d,["close","addEventListener","removeEventListener"]).includes(e)})).map((function(t){return a[e][t]=function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return a[t].apply(a,[e].concat(n))}}))})),o},A=function(e,t,r,n){var o=e.target.result;p[t][r]=o;var a=new x(o,t,r,n);return a instanceof Error?Promise.reject(a):Promise.resolve(a)},w={version:"0.15.0",open:function(e){var t=e.server,r=e.version||1,n=e.schema,o=e.noServerMethods;return p[t]||(p[t]={}),new Promise((function(e,a){if(p[t][r])A({target:{result:p[t][r]}},t,r,o).then(e,a);else{if("function"==typeof n)try{n=n()}catch(e){return void a(e)}var i=g.open(t,r);i.onsuccess=function(n){return A(n,t,r,o).then(e,a)},i.onerror=function(e){e.preventDefault(),a(e)},i.onupgradeneeded=function(e){var t=function(e,t,r,n,o,a){if(r&&0!==r.length){for(var i=0;i<n.objectStoreNames.length;i++){var s=n.objectStoreNames[i];f.call(r,s)||n.deleteObjectStore(s)}var u;return Object.keys(r).some((function(e){var o,a=r[e];if(n.objectStoreNames.contains(e))o=t.transaction.objectStore(e);else try{o=n.createObjectStore(e,a.key)}catch(e){return u=e,!0}Object.keys(a.indexes||{}).some((function(e){try{o.index(e)}catch(r){var t=a.indexes[e];t=t&&"object"===c(t)?t:{};try{o.createIndex(e,t.keyPath||t.key||e,t)}catch(e){return u=e,!0}}}))})),u}}(0,i,n,e.target.result);t&&a(t)},i.onblocked=function(e){var n=new Promise((function(e,n){i.onsuccess=function(a){A(a,t,r,o).then(e,n)},i.onerror=function(e){return n(e)}}));e.resume=n,a(e)}}}))},delete:function(e){return new Promise((function(t,r){var n=g.deleteDatabase(e);n.onsuccess=function(e){return t(e)},n.onerror=function(e){return r(e)},n.onblocked=function(e){e=null===e.newVersion||"undefined"==typeof Proxy?e:new Proxy(e,{get:function(e,t){return"newVersion"===t?null:e[t]}});var t=new Promise((function(t,r){n.onsuccess=function(r){"newVersion"in r||(r.newVersion=e.newVersion),"oldVersion"in r||(r.oldVersion=e.oldVersion),t(r)},n.onerror=function(e){return r(e)}}));e.resume=t,r(e)}}))},cmp:function(e,t){return new Promise((function(r,n){try{r(g.cmp(e,t))}catch(e){n(e)}}))}};void 0!==e.exports?e.exports=w:void 0===(n=function(){return w}.call(t,r,t,e))||(e.exports=n)}(self)},,function(e,t,r){"use strict";r.r(t);var n,o=r(0),a=r.n(o),i=r(2),s=r.n(i),c=r(10),u=r.n(c),l=r(12),f=r.n(l),m=r(3),g=r(4),p=r(8),d=r(5);function y(e){throw new TypeError('"'+e+'" is read-only')}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){x(a,n,o,i,s,"next",e)}function s(e){x(a,n,o,i,s,"throw",e)}i(void 0)}))}}s.a.runtime.onInstalled.addListener((function(){d.a.fireEvent("install")}));var w=function(){var e=A(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return e.next=3,f.a.open({server:"note-anywhere",version:2,schema:{notes:{key:{keyPath:"id",autoIncrement:!0},indexes:{url:{},timestamp:{},syncId:{unique:!0},deleted:{}}}}});case 3:n=e.sent;case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function k(e,t){return(0!=e.indexOf("http://")&&0!=e.indexOf("https://")||0==e.indexOf("https://browser.google.com/"))&&(t&&alert("Google Chrome has restrict to use plugin in this page!"),!0)}function j(e){var t=new URL(e);return t.href.replace(t.hash,"")}function O(e,t){return S.apply(this,arguments)}function S(){return(S=A(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(t.url,!0)){e.next=5;break}return e.next=3,s.a.tabs.sendMessage(t.id,{command:"newNote",data:r||{}});case 3:return n=e.sent,e.abrupt("return",n);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return E.apply(this,arguments)}function E(){return(E=A(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(t.url)){e.next=6;break}return e.next=3,D(t.url);case 3:r=e.sent,console.log("updateCount",r.length),r.length&&s.a.action.setBadgeText({text:"".concat(r.length),tabId:t.id});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return _.apply(this,arguments)}function _(){return _=A(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return n=e.sent,e.next=5,D(t);case 5:e.sent.forEach(function(){var e=A(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.notes.update(v(v({},t),{},{deleted:1,timestamp:+new Date}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function D(e){return C.apply(this,arguments)}function C(){return(C=A(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return n=e.sent,e.next=5,n.notes.query().filter("url",j(t)).filter((function(e){return 1!=e.deleted})).execute();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return L.apply(this,arguments)}function L(){return(L=A(a.a.mark((function e(t){var r,o,i,s,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return n=e.sent,t||(t=1),o=(r=20*(t-1))+21,e.next=8,n.notes.query().filter((function(e){return 1!=e.deleted})).map((function(e){return e.url})).execute();case 8:return i=e.sent,s=i.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{}),c=0,u=Object.keys(s).map((function(e){return c+=s[e],{url:e,count:s[e]}})).sort((function(e,t){return t.count-e.count})).slice(r,o),console.log("Total notes",c),e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return N.apply(this,arguments)}function N(){return(N=A(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.tabs.sendMessage(r.id,{command:"getPosition",data:{}});case 2:return n=e.sent,console.log("got position",n),e.next=6,O(r,{position:n});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=A(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.contextMenus.removeAll();case 2:s.a.contextMenus.create({id:"note-anywhere-create",title:"Add Note Here",contexts:["page"],documentUrlPatterns:["http://*/*","https://*/*"]}),s.a.contextMenus.onClicked.addListener(M);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.a.tabs.onUpdated.addListener((function(e,t,r){t.status&&"loading"===t.status&&r.url&&!k(r.url)&&P(r)})),s.a.runtime.onMessage.addListener(function(){var e=A(a.a.mark((function e(t,r){var o,i,s,c,l,f,p,y,h,b,x,A,k,j,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("get background message",t,r),e.next=3,w();case 3:if(n=e.sent,"loadCss"!==t.command){e.next=9;break}return e.next=7,Object(g.a)();case 7:return o=e.sent,e.abrupt("return",{css:o});case 9:if("loadNotes"!==t.command){e.next=14;break}return e.next=12,D(t.data.url);case 12:return i=e.sent,e.abrupt("return",i);case 14:if("save"!==t.command){e.next=28;break}if(s=t.data.id,c=t.data,!s){e.next=22;break}return e.next=20,n.notes.get(s);case 20:l=e.sent,c=v(v(v({},l),c),{},{timestamp:+new Date,sourceTitle:r.tab.title,sourceImage:r.tab.favIconUrl});case 22:return e.next=24,n.notes.update(c);case 24:return f=e.sent,p=f[0],console.log("Updated",p.id),e.abrupt("return",{message:"Updated",id:p.id});case 28:if("create"!==t.command){e.next=36;break}return e.next=31,n.notes.add(v(v({},t.data),{},{sourceTitle:r.tab.title,sourceImage:r.tab.favIconUrl,syncId:u()(),timestamp:+new Date}));case 31:return y=e.sent,h=y[0],console.log("Created",h.id),d.a.fireEvent("newNote"),e.abrupt("return",{message:"Created",id:h.id});case 36:if("delete"!==t.command){e.next=49;break}if(!(b=t.data.id)){e.next=48;break}return e.next=41,n.notes.get(b);case 41:return x=e.sent,A=v(v({},x),{},{deleted:1,timestamp:+new Date}),e.next=45,n.notes.update(A);case 45:k=e.sent,j=k[0],console.log("Deleted",j.id);case 48:return e.abrupt("return",{message:"Deleted",id:t.data.id});case 49:if("updateCount"!==t.command){e.next=55;break}return e.next=52,Object(m.a)();case 52:return P(e.sent),e.abrupt("return",!0);case 55:if("deleteURLNotes"!==t.command){e.next=59;break}return O=t.data.url,e.next=59,T(O);case 59:if("getSummary"!==t.command){e.next=62;break}return d.a.fireEvent("summary"),e.abrupt("return",I(t.data.page));case 62:if("sync"!==t.command){e.next=65;break}return d.a.fireEvent("sync"),e.abrupt("return",U());case 65:return e.abrupt("return",!0);case 66:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),function(){R.apply(this,arguments)}(),s.a.runtime.onMessageExternal.addListener(function(){var e=A(a.a.mark((function e(t,r,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("external",r,t),"login"!==t.type){e.next=6;break}return e.next=4,Object(g.d)("token",t.token);case 4:return e.next=6,Object(g.d)("user",t.user);case 6:return e.abrupt("return",Promise.resolve("got your message, thanks!"));case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}());var B=function(e){return new Promise((function(t){return setTimeout(t,e)}))},F=!1;function U(){return q.apply(this,arguments)}function q(){return q=A(a.a.mark((function e(){var t,r,o,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.b)("token");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!F){e.next=7;break}return e.abrupt("return");case 7:return F=!0,e.next=10,Object(g.b)("lastSync");case 10:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=14;break}e.t0=void 0!==t;case 14:if(!e.t0){e.next=18;break}e.t2=t,e.next=19;break;case 18:e.t2=0;case 19:return r=e.t2,o=!1,console.log("sync now",new Date(+r),"->",new Date),e.prev=22,e.next=25,w();case 25:return n=e.sent,i=+new Date,e.next=29,n.notes.query("timestamp").lowerBound(+r).limit(0,101).execute();case 29:return 101==(s=e.sent).length&&(s[100].timestamp,y("newSyncTime"),o=!0),s=s.filter((function(e,t){return t<100})),console.log("send to sync",s),e.next=35,G({streamId:"noteanywhere-to-myatoms",data:s.map(V),lastSync:r});case 35:if(c=e.sent,console.log("sync ok",c.ok),!c.ok){e.next=42;break}return e.next=40,c.json();case 40:e.sent.data.forEach(function(){var e=A(a.a.mark((function e(t){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.notes.query("syncId").only(t.syncId).execute();case 2:if(!(r=e.sent).length){e.next=9;break}return o=r[0],e.next=7,n.notes.update(v(v({},t.appMeta),{},{deleted:t.deleted?1:0,timestamp:+new Date(t.updatedAt),id:o.id}));case 7:e.next=13;break;case 9:return delete(i=v(v({},t.appMeta),{},{deleted:t.deleted?1:0,syncId:t.syncId,timestamp:+new Date(t.updatedAt)})).id,e.next=13,n.notes.add(i);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 42:return e.next=44,Object(g.d)("lastSync",i);case 44:return e.next=46,B(1e3);case 46:o&&U(),e.next=52;break;case 49:e.prev=49,e.t3=e.catch(22),console.log("sync error",e.t3);case 52:return F=!1,e.abrupt("return",!0);case 54:case"end":return e.stop()}}),e,null,[[22,49]])}))),q.apply(this,arguments)}function V(e){var t,r,n,o;return{syncId:null!==(t=e.syncId)&&void 0!==t?t:u()(),type:"note",note:e.text,app:"Note Anywhere",appMeta:e,source:{type:"web",title:null!==(r=e.sourceTitle)&&void 0!==r?r:e.url,url:e.url,image:null!==(n=e.sourceImage)&&void 0!==n?n:null},control:{deleted:null!==(o=e.deleted)&&void 0!==o?o:0,timestamp:e.timestamp}}}function G(e){return W.apply(this,arguments)}function W(){return(W=A(a.a.mark((function e(t){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g.b)("token");case 3:return r=e.sent,n=r.token,e.next=7,fetch("".concat(p.a.base,"/api/integration/sync?token=").concat(n),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 7:return o=e.sent,console.log("fetch result",o),e.abrupt("return",o);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}s.a.alarms.create("sync",{delayInMinutes:1,periodInMinutes:5}),chrome.alarms.onAlarm.addListener((function(e){"sync"===e.name&&U()})),s.a.windows.onRemoved.addListener((function(){U()}),{windowTypes:["normal"]}),chrome.runtime.onStartup.addListener((function(){setTimeout((function(){return U()}),1e3)}))},function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(11),a="object"===("undefined"==typeof window?"undefined":n(window))?window:self,i=Object.keys(a).length,s=o(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+i.toString(36),4);e.exports=function(){return s}},function(e,t){var r,n="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(n){var o=Math.pow(2,32)-1;r=function(){return Math.abs(n.getRandomValues(new Uint32Array(1))[0]/o)}}else r=Math.random;e.exports=r}]);